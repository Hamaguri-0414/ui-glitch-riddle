# プロジェクトの開発要件

## 概要
本プロジェクトは、画像で表示される謎解きに解答し、最終問題の正解を目指すWebアプリケーションです。
モバイルでのプレイにのみ対応し、PCではプレイできません。
自前実装されたフリック入力のキーを画像上に自由に配置することができ、キーを謎解きが表示されている画像上に、問題が成立するように置くことで謎解きに矛盾が起きないようにし、謎の答えをフリック入力することで問題に解答していきます。

## ゲームクリアまでのフロー
本ゲームは次のフローにしたがって進行します
- タイトル画面
- 遊び方ダイアログ
- メイン画面
    - 謎1
    - 謎2
    - 謎3
    - 謎4
    - 謎5
    - 謎6
    - 謎7
- クリア画面

### タイトル画面
- 「UI破壊謎」というタイトルが中央に表記される
- 作者 はまぐり のXリンク( @a0a8u1i4 という表記で、リンク先は https://x.com/a0a8u1i4 )が右上隅に表示される
- はじめる と表記されたボタンが中央下部に表示される

## 遊び方ダイアログ
- 遊び方の説明文がダイアログで表示され、下部までスクロールすると「謎を解きはじめる」ボタンが表示される
- ゲーム中に後述する「説明」ダイアログを推した場合は「謎を解きはじめる」ボタンではなく「閉じる」ボタンが表示される
- 「謎を解きはじめる」ボタン、もしくは「閉じる」ボタンを押下すると遊び方ダイアログが閉じ、メイン画面が表示される
- 遊び方説明の文章
    - この謎解きは、情報が不足している謎解きを成立させながら解き進める謎解きです。
    - 灰色背景の領域にあるパーツは、2秒以上押下することで白色背景のどこかに移動することができます。
    - 例
        - [example.pngが表示されている]
    - 以下の条件を全て満たしたときに正解と判定されます。
        - 入力欄の内側に謎の答えが表示されている
        - かくていを押したタイミングで、謎が矛盾なく成立している
    - 全7問の謎が順番に出題されます。全ての謎の解法は1通りであり、前の謎に戻って解きなおす必要はありません。
    - 7問目の謎に正解できたらオールクリアであり、隠し要素は一切ありません。
    - 「ヒント」を押すことで、現在表示されている謎のヒントが表示されます。
    - 謎を解く上で、ソースコードを閲覧することが必要となる謎はありません。
    - 不具合と思われる現象が確認された場合は、contact@hamaguri.dev まで連絡していただけると大変助かります。

## メイン画面
- 画面は上・中・下の三画面に分割されている
- 上
    - 4:3比率のpng画像が表示される
    - この領域に「中」「下」の領域にあるパーツを移動させるとその場に残る
- 中
    - 左矢印ボタン(謎1のみ表示されない)・入力欄・右矢印ボタン(各謎の答えに正解するまでは表示されず、また謎7のみ表示されない)の3パーツが表示される
    - 2秒以上長押しすることで各パーツは移動できる
    - 入力欄の中にパーツを移動させるとその場に残る
- 下
    - フリック入力に必要なキーが表示されている
        - 「あ」「か」「さ」「た」「な」「は」「ま」「や」「ら」「わ」ボタンがフリック入力配列で配置されている
            - それぞれのキーは長押ししている間、各行のかな文字が十字に展開される
            - 「や」は上に「ゆ」、下に「よ」の２方向のみ展開される
            - 「わ」は左に「を」、上に「ん」の２方向のみ展開される
        - 「゛」ボタンが「わ」の左側に配置されている
            - 押下すると直前に入力したひらがなに濁点・半濁点を付ける
        - 「削除」ボタンが「さ」の右側に配置されている
            - 押下すると一文字削除される
        - 「確定」ボタンが「わ」の右にひとつ空白を空け、さらにその右に配置される
            - 押下すると謎の答えが正誤判定される
        - 「説明」ボタンが「あ」の左側に配置されている
            - 押下すると遊び方ダイアログが表示される
        - 「ヒント」ボタンが「゛」の左側に配置されている
            - 押下するとヒントダイアログが表示される
    - 2秒以上押下することで、各パーツは移動できる（押下時に展開されるキーは2秒以上の押下によって展開が格納される）
- 左・右矢印ボタンを押下して謎を移動させた場合、そのタイミングで移動していたパーツはその謎に留まり、他の謎を表示している間は非表示になる
- クリアした謎を表示している場合、パーツを移動させることはできない
    - 移動させようとすると「もう動かす必要はないようだ」というダイアログ中央にフェードイン表示・2秒後にフェードアウト非表示され、移動させたパーツは初期位置に戻る

## クリア画面
- GAME CLEAR と中央に表記される
- ※これ以上謎はありません と中央下部に表示される
- クリアをXにシェアする とシェアボタンが中央下部に表示される